// books.js
window.booksData = [
  {
    title: "Rich dad Poor dad",
    cover: "img/cover13.webp",
    pdf: "pdf/Rich Dad Poor Dad - Robert T. Kiyosaki.pdf",
    author: "Robert T. Kiyosaki",
    penerbit: "Plata Publishing",
    tahunTerbit: " 1997",
    category: "self-development",
  },

  {
    title: "filosofiteras",
    cover: "img/coverS (4).webp",
    pdf: "pdf/filosofiteras.pdf",
    author: "henry manampiring",
    penerbit: "Penerbit Kompas",
    tahunTerbit: "2018",
    category: "self-development",
  },

  {
    title: "begining python",
    cover: "img/cover (1).webp",
    pdf: "pdf/begining_python.pdf",
    author: "Peter Norton, Alex Samuel ...",
    penerbit: "Wiley Publishing, Inc.",
    tahunTerbit: "2005",
    category: "tech",
  },

  {
    title: "bicara itu ada seninya",
    author: "oh su hyang",
    cover: "img/coverS (1).webp",
    pdf: "pdf/bicara_itu_ada_seninya.pdf",
    penerbit: "Bhuana Ilmu Populer (BIP)",
    tahunTerbit: "2019",
    category: "self-development",
  },
  {
    title: "Psychology of Money",
    cover: "img/cover12.webp",
    pdf: "pdf/Copy of The Psychology of Money  Morgan Housel  (SFILE.MOBI).pdf",
    author: "Morgan Housel",
    penerbit: "HarperOne",
    tahunTerbit: "2020",
    category: "self-development",
  },

  {
    title: "The Principles Of Power",
    cover: "img/cover14.webp",
    pdf: "pdf/032. The Principles Of Power (Dion Yulianto).pdf",
    author: "Dion Yulianto",
    penerbit: "Jendela Penerbit",
    tahunTerbit: "2023",
    category: "self-development",
  },

  {
    title: "Atomic Habits",
    cover: "img/cover11.webp",
    pdf: "pdf/Atomic Habits Perubahan Kecil yang memberikan hasil luar biasa by James Clear.pdf",
    author: "James Clear",
    penerbit: "Penguin Random House",
    tahunTerbit: "2019",
    category: "self-development",
  },

  {
    title: "teori kewirausahaan dan bisnis",
    cover: "img/coverS (2).webp",
    pdf: "pdf/teori_kewirausahawan.pdf",
    author: "Dr. Agus Wibowo , M.kom , M.Si , MM",
    penerbit: "yayasan primaagus teknik",
    tahunTerbit: "2023",
    category: "self-development",
  },

  {
    title: "Berani Tidak Disukai",
    cover: "img/cover15.webp",
    pdf: "pdf/Ebook Berani Tidak Disukai.pdf",
    author: "Ichiro Kishimi dan Fumitake Koga",
    penerbit: "Gramedia Pustaka Utama",
    tahunTerbit: " 2017",
    category: "self-development",
  },

  {
    title: "Sebuah Seni Bersikap Bodo Amat",
    cover: "img/cover16.webp",
    pdf: "pdf/Sebuah Seni Bersikap Bodo Amat by Mark Manson.pdf",
    author: "Mark Manson",
    penerbit: " Gramedia Pustaka Utama",
    tahunTerbit: "2018",
    category: "self-development",
  },

  {
    title: "beginning game development with python and pygame",
    cover: "img/cover (2).webp",
    pdf: "pdf/game_dev_python.pdf",
    author: "Will McGugan",
    penerbit: "Apress",
    tahunTerbit: "2007",
    category: "tech",
  },

  {
    title: "artificial intelegence",
    cover: "img/cover (3).webp",
    pdf: "pdf/artificial_intelegence.pdf",
    author: "Kevin Warwick",
    penerbit: "Routledge",
    tahunTerbit: "2012",
    category: "tech",
  },

  {
    title: "Public Speaking Mastery",
    cover: "img/cover17.webp",
    pdf: "pdf/Public Speaking Mastery.pdf",
    author: "Ongky Hojanto",
    penerbit: "Gramedia Pustaka Utama",
    tahunTerbit: "2018",
    category: "self-development",
  },

  {
    title: "analisis big data",
    cover: "img/cover (4).webp",
    pdf: "pdf/analis_big_data.pdf",
    author: "Dr. Joseph Teguh santoso, S.kom , M.kom",
    penerbit: "yayasan primaagus teknik",
    tahunTerbit: "2020",
    category: "tech",
  },

  {
    title: "belajar dasar algoritma dan pemograman",
    cover: "img/cover (5).webp",
    pdf: "pdf/algoritma_pemograman.pdf",
    author: "edy budiman",
    penerbit: "data tidak ditemukan",
    tahunTerbit: "data tidak ditemukan",
    category: "tech",
  },

  {
    title: "kecerdasan buatan kajian konsep dan penerapan",
    cover: "img/cover (6).webp",
    pdf: "pdf/kecerdasan_buatan.pdf",
    author: "Jorot Dian Susatyono , M.kom",
    penerbit: "yayasan primaagus teknik",
    tahunTerbit: "2021",
    category: "tech",
  },

  {
    title: "cepat mahir python",
    cover: "img/cover (7).webp",
    pdf: "pdf/cepatmahirpython.pdf",
    author: "hendri",
    penerbit: "data tidak ditemukan",
    tahunTerbit: "data tidak ditemukan",
    category: "tech",
  },

  {
    title: "projek codingan dengan python",
    cover: "img/cover (8).webp",
    pdf: "pdf/projekcodingdenganpython.pdf",
    author: "Dr. Joseph Teguh santoso, S.ko , M.kom",
    penerbit: "yayasan primaagus teknik",
    tahunTerbit: "2022",
    category: "tech",
  },

  {
    title: "data analysis numpy , mathplotlib , pandas",
    cover: "img/cover (10).webp",
    pdf: "pdf/bernd_klein_python_data_analysis_a4.pdf",
    author: "Berd Klein",
    penerbit: "data tidak ditemukan",
    tahunTerbit: "data tidak ditemukan",
    category: "tech",
  },

  {
    title: "pengendalian keuangan",
    cover: "img/coverS (3).webp",
    pdf: "pdf/pengaturan_uang.pdf",
    author: "Dr.Ir. Agus Wibowo , M.kom , M.Si , MM",
    penerbit: "yayasan primaagus teknik",
    tahunTerbit: "2023",
    category: "self-development",
  },
];

function bookList() {
  return {
    searchQuery: "", //kata kunci pencarian
    selectedCategory: "",  // Kategori yang dipilih
    books: window.booksData, //data buku 
    selectedBook: null,

    get filteredBooks() {

      let filtered = this.books;

      // Pencarian hanya dilakukan jika searchQuery lebih dari 4 karakter
      if (this.searchQuery.length >= 4) {
        const query = this.searchQuery.toLowerCase();
        filtered = filtered
          .map((book) => ({
            book,
            score: this.calculateMatchScore(book.title.toLowerCase(), query),
          }))
          .filter((result) => result.score > 0)
          .sort((a, b) => b.score - a.score)
          .map((result) => result.book);
      }

      // Filter berdasarkan kategori yang dipilih
      if (this.selectedCategory) {
        filtered = filtered.filter(book => book.category === this.selectedCategory);
      }

      return filtered;
    },

    get noBooksFound() {
      return this.searchQuery.length >= 4 && this.filteredBooks.length === 0;
    },

    calculateMatchScore(title, query) {
      if (!query) return 0;

      const titleWords = title.split(" ");
      const queryWords = query.split(" ");
      let score = 0;

      queryWords.forEach((queryWord) => {
        titleWords.forEach((titleWord) => {
          if (titleWord.startsWith(queryWord)) {
            score += queryWord.length / titleWord.length;
          }
        });
      });

      return score / queryWords.length;
    },

  };
}

